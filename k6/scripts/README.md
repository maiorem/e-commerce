# K6 λ¶€ν•ν…μ¤νΈ μ¤ν¬λ¦½νΈ

μ΄ λ””λ ‰ν† λ¦¬μ—λ” λ‹¤μ–‘ν• APIμ— λ€ν• λ¶€ν•ν…μ¤νΈ μ¤ν¬λ¦½νΈκ°€ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤.

## π“ μ¤ν¬λ¦½νΈ λ©λ΅

### 1. **product-detail.js** - μƒν’ μƒμ„Έ API λ¶€ν•ν…μ¤νΈ
- **λ©μ **: μƒν’ μƒμ„Έ μ΅°ν APIμ μ„±λ¥ ν…μ¤νΈ
- **μ—”λ“ν¬μΈνΈ**: `GET /api/v1/products/{id}`
- **νΉμ§•**: λλ¤ μƒν’ IDλ΅ μ΅°ν

### 2. **product-list-ramp_up.js** - μƒν’ λ©λ΅ API λ¶€ν•ν…μ¤νΈ
- **λ©μ **: μƒν’ λ©λ΅ μ΅°ν APIμ μ„±λ¥ ν…μ¤νΈ
- **μ—”λ“ν¬μΈνΈ**: `GET /api/v1/products?pageSize=20`
- **νΉμ§•**: νμ΄μ§€λ„¤μ΄μ…λ μƒν’ λ©λ΅ μ΅°ν

### 3. **order-creation-load-test.js** - μ£Όλ¬Έ μƒμ„± API κ³ κΈ‰ λ¶€ν•ν…μ¤νΈ β­
- **λ©μ **: μ£Όλ¬Έ μƒμ„± APIμ μΆ…ν•©μ μΈ μ„±λ¥ ν…μ¤νΈ
- **μ—”λ“ν¬μΈνΈ**: `POST /api/v1/orders`
- **νΉμ§•**: 
  - λ‹¤μ–‘ν• κ²°μ  λ°©λ²• (μΉ΄λ“ 80%, ν¬μΈνΈ 20%)
  - μΏ ν° μ‚¬μ© (30% ν™•λ¥ )
  - μ»¤μ¤ν…€ λ©”νΈλ¦­ (μ£Όλ¬Έ μƒμ„± μ‹κ°„, μ„±κ³µλ¥ )
  - μƒμ„Έν• μ‘λ‹µ κ²€μ¦

### 4. **order-creation-simple.js** - μ£Όλ¬Έ μƒμ„± API κ°„λ‹¨ λ¶€ν•ν…μ¤νΈ
- **λ©μ **: μ£Όλ¬Έ μƒμ„± APIμ κΈ°λ³Έμ μΈ μ„±λ¥ ν…μ¤νΈ
- **μ—”λ“ν¬μΈνΈ**: `POST /api/v1/orders`
- **νΉμ§•**: 
  - μΉ΄λ“ κ²°μ λ§ μ‚¬μ©
  - κ°„λ‹¨ν• λ°μ΄ν„° κµ¬μ΅°
  - λΉ λ¥Έ μ‹¤ν–‰

## π€ μ‹¤ν–‰ λ°©λ²•

### κΈ°λ³Έ μ‹¤ν–‰
```bash
# μ£Όλ¬Έ μƒμ„± κ³ κΈ‰ λ¶€ν•ν…μ¤νΈ
k6 run order-creation-load-test.js

# μ£Όλ¬Έ μƒμ„± κ°„λ‹¨ λ¶€ν•ν…μ¤νΈ
k6 run order-creation-simple.js

# μƒν’ μƒμ„Έ λ¶€ν•ν…μ¤νΈ
k6 run product-detail.js

# μƒν’ λ©λ΅ λ¶€ν•ν…μ¤νΈ
k6 run product-list-ramp_up.js
```

### ν™κ²½λ³€μ μ„¤μ •
```bash
# λ‹¤λ¥Έ μ„λ²„ URLλ΅ ν…μ¤νΈ
BASE_URL=http://localhost:8080 k6 run order-creation-load-test.js

# Docker ν™κ²½μ—μ„ μ‹¤ν–‰
BASE_URL=http://host.docker.internal:8080 k6 run order-creation-load-test.js
```

### Dockerμ—μ„ μ‹¤ν–‰
```bash
# Docker μ»¨ν…μ΄λ„μ—μ„ k6 μ‹¤ν–‰
docker run -i --rm -v $(pwd):/scripts -w /scripts grafana/k6 run order-creation-load-test.js
```

## π“ μ£Όλ¬Έ μƒμ„± API λ¶€ν•ν…μ¤νΈ μƒμ„Έ

### ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
1. **1λ¶„**: 5λ…μ κ°€μƒ μ‚¬μ©μλ΅ μ‹μ‘
2. **2λ¶„**: 20λ…μΌλ΅ μ¦κ°€
3. **3λ¶„**: 50λ…μΌλ΅ μ¦κ°€
4. **2λ¶„**: 100λ…μΌλ΅ μ¦κ°€
5. **2λ¶„**: 100λ… μ μ§€ (μµλ€ λ¶€ν•)
6. **2λ¶„**: 0λ…μΌλ΅ κ°μ†

### μƒμ„±λλ” μ£Όλ¬Έ λ°μ΄ν„°
- **μ‚¬μ©μ ID**: `user1` ~ `user100000` (λλ¤)
- **μƒν’ ID**: 1 ~ 1,000,000 (λλ¤)
- **μλ‰**: 1 ~ 3κ° (λλ¤)
- **μƒν’ κ°€κ²©**: 10,000μ› ~ 510,000μ› (λλ¤)
- **κ²°μ  λ°©λ²•**: 
  - μΉ΄λ“ κ²°μ  (80%): SAMSUNG μΉ΄λ“, κ³ μ • μΉ΄λ“λ²νΈ
  - ν¬μΈνΈ κ²°μ  (20%): 1,000 ~ 10,000 ν¬μΈνΈ μ‚¬μ©
- **μΏ ν°**: 30% ν™•λ¥ λ΅ μ‚¬μ©

### μ„±λ¥ κΈ°μ¤€
- **μ‘λ‹µ μ‹κ°„**: 95% μ”μ²­μ΄ 2μ΄ μ΄λ‚΄
- **μ—λ¬μ¨**: 10% λ―Έλ§
- **μ£Όλ¬Έ μƒμ„± μ„±κ³µλ¥ **: λ¨λ‹ν„°λ§

### μ»¤μ¤ν…€ λ©”νΈλ¦­
- `order_creation_duration`: μ£Όλ¬Έ μƒμ„± μ†μ” μ‹κ°„
- `order_success_rate`: μ£Όλ¬Έ μƒμ„± μ„±κ³µλ¥ 

## π”§ ν…μ¤νΈ μ „ μ¤€λΉ„μ‚¬ν•­

### 1. λ°μ΄ν„°λ² μ΄μ¤ μ¤€λΉ„
```bash
# LargeSeederλ΅ ν…μ¤νΈ λ°μ΄ν„° μƒμ„±
./gradlew :apps:commerce-api:runLargeSeeder
```

### 2. μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
```bash
# Spring Boot μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
./gradlew :apps:commerce-api:bootRun
```

### 3. μΈν”„λΌ μ„λΉ„μ¤ μ‹¤ν–‰
```bash
# MySQL, Redis λ“± μ‹¤ν–‰
docker-compose -f docker/infra-compose.yml up -d
```

## π“ κ²°κ³Ό λ¶„μ„

### μ„±κ³µμ μΈ ν…μ¤νΈ κ²°κ³Ό
- μ‘λ‹µ μ‹κ°„μ΄ μ„κ³„κ°’ λ‚΄μ— μ μ§€
- μ—λ¬μ¨μ΄ 10% λ―Έλ§
- μ£Όλ¬Έ μƒμ„± μ„±κ³µλ¥ μ΄ 90% μ΄μƒ

### λ¬Έμ κ°€ μλ” κ²½μ°
- **μ‘λ‹µ μ‹κ°„ μ΄κ³Ό**: λ°μ΄ν„°λ² μ΄μ¤ μ„±λ¥, μΈλ±μ¤ ν™•μΈ
- **λ†’μ€ μ—λ¬μ¨**: μ• ν”λ¦¬μΌ€μ΄μ… λ΅κ·Έ, λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° ν™•μΈ
- **μ£Όλ¬Έ μƒμ„± μ‹¤ν¨**: λΉ„μ¦λ‹μ¤ λ΅μ§, λ°μ΄ν„° κ²€μ¦ ν™•μΈ

## π― ν…μ¤νΈ λ©ν‘

1. **μ„±λ¥ κ²€μ¦**: μ£Όλ¬Έ μƒμ„± APIκ°€ μμƒ λ¶€ν•λ¥Ό μ²λ¦¬ν•  μ μλ”μ§€ ν™•μΈ
2. **μ•μ •μ„± κ²€μ¦**: μ¥μ‹κ°„ λ¶€ν• μƒν™©μ—μ„λ„ μ•μ •μ μΌλ΅ λ™μ‘ν•λ”μ§€ ν™•μΈ
3. **λ°μ΄ν„° μΌκ΄€μ„±**: μ£Όλ¬Έ μƒμ„± μ‹ μ¬κ³ , ν¬μΈνΈ, μΏ ν° λ“±μ΄ μ¬λ°”λ¥΄κ² μ²λ¦¬λλ”μ§€ ν™•μΈ
4. **μ‚¬μ©μ κ²½ν—**: μ‘λ‹µ μ‹κ°„μ΄ μ‚¬μ©μκ°€ κΈ°λ‹¤λ¦΄ μ μλ” μμ¤€μΈμ§€ ν™•μΈ
