# 요구사항 정의
---

## 1. 상품 목록 조회

### 요구사항
- 로그인하지 않은 사용자도 시스템에 등록된 상품들의 목록을 조회할 수 있다.
- 사용자는 상품 품목과 특정 브랜드를 기준으로 상품 목록을 필터링할 수 있다.
- 사용자는 상품 목록을 최신순, 가격 낮은순, 좋아요 많은 순으로 정렬 할 수 있다. (기본 정렬은 최신순이다.)
- 사용자는 페이지 번호와 페이지당 상품 수를 지정하여 상품 목록을 조회할 수 있다.

**실패 케이스**
- 상품 데이터가 존재하지 않으면 빈 값을 반환한다.
- 유효하지 않은 브랜드로 요청 시, 오류를 반환한다.
- 유효하지 않은 정렬값으로 요청 시, 오류를 반환한다.
- 유효하지 않은 페이지 값으로 요청 시, 오류를 반환한다.

**HTTP 상태코드 / 에러메시지 정의**

| 케이스               | 설명 | HTTP 상태코드 | 에러메시지 예시 |
|-------------------| --- | --- | --- |
| 유효하지 않은 `brandId` | 존재하지 않는 브랜드 ID 요청 | 404 NOT FOUND | "해당 브랜드를 찾을 수 없습니다." |
| 유효하지 않은 정렬 값      | 허용되지 않는 정렬 기준 요청 | 400 BAD REQUEST | "허용되지 않는 정렬 기준입니다." |
| 유효하지 않은 페이지 사이즈   | 파라미터 유효성 위반 | 400 BAD REQUEST | "잘못된 페이지 또는 사이즈 파라미터입니다." |
| 내부 서버 오류          | 상품 조회 중 시스템 오류 | 500 INTERNAL SERVER ERROR | "상품 목록 조회 중 오류가 발생했습니다." |


---

## **2. 상품 상세 조회**

### **요구사항**
- 로그인하지 않은 사용자도 특정 상품 ID를 통해 상품의 상세 정보를 조회할 수 있다.
- 조회되는 상품 상세 정보에는 상품 이름, 설명, 가격, 브랜드 정보, 재고 수량, 현재 좋아요 총 개수가 포함된다.

**실패 케이스**
- 요청된 상품 ID에 해당하는 상품이 존재하지 않으면 오류를 반환한다.
- 상품 상세 정보 조회 중 시스템 오류가 발생하면 오류를 반환한다.

**HTTP 상태코드 / 에러메시지 정의**

| 케이스 | 설명 | HTTP 상태코드 | 에러메시지 예시 |
| --- | --- | --- | --- |
| 상품 미존재 | 존재하지 않는 상품 ID 요청 | 404 NOT FOUND | "해당 상품을 찾을 수 없습니다." |
| 내부 서버 오류 | 상품 조회 중 시스템 오류 | 500 INTERNAL SERVER ERROR | "상품 상세 조회 중 오류가 발생했습니다." |

---

## **3. 브랜드 정보 조회**

### **요구사항**
- 로그인 하지 않은 사용자도 특정 브랜드명을 통해 브랜드의 상세 정보를 조회할 수 있다.
- 조회되는 브랜드 상세 정보에는 브랜드 이름, 설명이 포함된다.
- 브랜드 조회 결과로 해당 브랜드 상품들이 조회된다.
- 브랜드 상품 목록은 판매 인기순으로 정렬된다.

**실패 케이스**
- 요청된 브랜드 ID에 해당하는 브랜드가 존재하지 않으면 "오류를 반환한다".
- 브랜드 정보 조회 중 시스템 오류가 발생하면 "오류를 반환한다".

**HTTP 상태코드 / 에러메시지 정의**

| 케이스 | 설명 | HTTP 상태코드 | 에러메시지 예시 |
| --- | --- | --- | --- |
| 브랜드 미존재 | 존재하지 않는 브랜드 ID 요청 | 404 NOT FOUND | "해당 브랜드를 찾을 수 없습니다." |
| 내부 서버 오류 | 브랜드 조회 중 시스템 오류 | 500 INTERNAL SERVER ERROR | "브랜드 정보 조회 중 오류가 발생했습니다." |

---

## **4. 상품 좋아요 등록 / 취소**

### **요구사항**
- 로그인 한 사용자는 특정 상품에 좋아요를 등록할 수 있다.
- 로그인 한 사용자는 특정 상품에 등록된 좋아요를 취소할 수 있다.
- 아직 좋아요를 누르지 않은 상태에서 등록 요청을 보내면 좋아요가 등록되고, 이미 좋아요를 누른 상태에서 다시 등록 요청을 보내도 성공 응답을 받으며 좋아요 상태는 유지되고 중복 등록되지 않는다.
- 이미 좋아요를 누른 상태에서 취소 요청을 보내면 좋아요가 취소되고, 이미 좋아요를 취소한 상태에서 다시 취소 요청을 보내도 성공 응답을 받으며 좋아요 취소 상태는 유지되고 더 이상 취소되지 않는다.
- 사용자는 자신이 '좋아요'한 상품 목록을 조회할 수 있다.
- 상품 목록 및 상품 상세 정보 조회 시 해당 상품의 총 좋아요 수가 표시되어야 한다.

**실패 케이스**
- 요청된 상품 ID에 해당하는 상품이 존재하지 않으면 오류를 반환한다.
- `X-USER-ID` 헤더가 없거나 유효하지 않은 사용자 ID일 경우 오류를 반환한다.
- 좋아요 등록/취소 처리 중 시스템 오류가 발생하면 오류를 반환한다.

**HTTP 상태코드 / 에러메시지 정의**

| 케이스 | 설명 | HTTP 상태코드 | 에러메시지 예시 |
| --- | --- | --- | --- |
| 상품 미존재 | 존재하지 않는 상품 ID 요청 | 404 NOT FOUND | "해당 상품을 찾을 수 없습니다." |
| 사용자 인증 정보 불충분/오류 | `X-USER-ID` 헤더 누락 또는 유효하지 않은 사용자 ID | 401 UNAUTHORIZATION | "유효한 사용자 정보가 필요합니다." / "사용자를 찾을 수 없습니다." |
| 내부 서버 오류 | 좋아요 처리 중 시스템 오류 | 500 INTERNAL SERVER ERROR | "좋아요 처리 중 오류가 발생했습니다." |

---

## **5. 주문 생성 및 결제 흐름**

### **요구사항**
- 로그인 한 사용자는 여러 상품을 한 번에 담아 주문을 요청할 수 있다.
- 시스템은 주문 요청 시 주문 내역의 각 상품에 대해 재고를 확인하고, 충분할 경우 해당 수량만큼 재고를 차감한다.
- 시스템은 주문 상품들의 총 결제 금액을 계산하고, 사용자의 보유 포인트를 확인하여 충분할 경우 해당 금액만큼 포인트를 차감한다.
- 시스템은 주문 정보를 생성하고 저장한다.
- 시스템은 생성된 주문 정보를 결제 시스템으로 전송한다.
- 주문 및 결제 처리가 성공적으로 완료되면 사용자에게 성공 응답을 반환한다.

**실패 케이스**
- 주문 요청 시 필수 항목(예: 상품 목록, 수량)이 누락되거나 유효하지 않으면 오류를 반환한다.
- 주문 내역에 포함된 상품 중 존재하지 않는 상품이 있으면 오류를 반환한다.
- 주문 상품의 재고가 부족하면 오류를 반환한다.
- 사용자의 보유 포인트가 총 결제 금액보다 부족하면 오류를 반환한다.
- 주문 정보 저장 또는 외부 시스템 전송 중 시스템 오류가 발생하면 오류를 반환한다.
- `X-USER-ID` 헤더가 없거나 유효하지 않은 사용자 ID일 경우 오류를 반환한다.

**HTTP 상태코드 / 에러메시지 정의**

| 케이스 | 설명 | HTTP 상태코드 | 에러메시지 예시 |
| --- | --- | --- | --- |
| 잘못된 주문 요청 | 필수 항목 누락, 형식 오류 등 | 400 BAD REQUEST | "주문 요청 형식이 올바르지 않습니다." |
| 상품 미존재 | 주문 내역에 존재하지 않는 상품 포함 | 404 NOT FOUND | "주문하려는 상품을 찾을 수 없습니다." |
| 재고 부족 | 주문 상품 중 재고가 부족한 경우 | 400 BAD REQUEST | "일부 상품의 재고가 부족합니다." |
| 포인트 부족 | 사용자 보유 포인트가 결제 금액에 부족 | 400 BAD REQUEST | "보유 포인트가 부족하여 결제할 수 없습니다." |
| 사용자 인증 정보 불충분/오류 | `X-USER-ID` 헤더 누락 또는 유효하지 않은 사용자 ID | 401 UNAUTHORIZATION | "유효한 사용자 정보가 필요합니다." |
| 내부 서버 오류 | 주문 처리 중 시스템 오류 | 500 INTERNAL SERVER ERROR | "주문 처리 중 오류가 발생했습니다." |


---

## **6. 주문 목록 조회**

### **요구사항**
- 로그인 한 사용자는 자신의 주문 내역을 조회할 수 있다.
- 시스템은 주문 내역을 주문 날짜 기준으로 정렬하여 반환한다.
- 사용자는 주문 내역을 페이지네이션하여 조회할 수 있다.

**실패 케이스**
- 로그인하지 않은 사용자가 주문 내역을 조회하려고 하면 오류를 반환한다.
- 주문 내역 조회 중 시스템 오류가 발생하면 오류를 반환한다.
- `X-USER-ID` 헤더가 없거나 유효하지 않은 사용자 ID일 경우 오류를 반환한다.
- 사용자가 요청한 주문 내역이 존재하지 않을 경우 빈 값을 반환한다.
- 사용자가 요청한 주문 내역이 자신의 주문이 아닐 경우 오류를 반환한다.

**HTTP 상태코드 / 에러메시지 정의**

| 케이스 | 설명 | HTTP 상태코드 | 에러메시지 예시 |
| --- | --- | --- | --- |
| 사용자 인증 정보 불충분/오류 | 로그인하지 않은 사용자가 주문 내역 조회 시도 | 401 UNAUTHORIZATION | "로그인이 필요합니다." |
| 주문 내역 미존재 | 요청한 주문 내역이 존재하지 않을 경우 | 404 NOT FOUND | "주문 내역을 찾을 수 없습니다." |
| 사용자 인증 정보 불충분/오류 | `X-USER-ID` 헤더 누락 또는 유효하지 않은 사용자 ID | 401 UNAUTHORIZATION | "유효한 사용자 정보가 필요합니다." |
| 내부 서버 오류 | 주문 내역 조회 중 시스템 오류 | 500 INTERNAL SERVER ERROR | "주문 내역 조회 중 오류가 발생했습니다." |


---

## **7. 주문 상세 조회**

### **요구사항**
- 로그인 한 사용자는 자신의 특정 주문 ID를 통해 주문 상세 정보를 조회할 수 있다.
- 조회되는 주문 상세 정보에는 주문 ID, 주문 날짜, 총 결제 금액, 주문 상태, 주문 상품 목록(상품명, 수량, 가격 등)이 포함된다.
- 주문 상품 목록은 각 상품의 옵션 정보(옵션명, 옵션값 등)를 포함한다.
- 주문 상세 정보 조회 시 주문 상태에 따라 주문 취소 가능 여부를 표시한다.
- 주문 상세 정보 조회 시 결제 이력(결제 수단, 결제 상태 등)을 포함한다.
- 주문 상세 정보 조회 시 주문에 사용된 포인트 내역을 포함한다.

**실패 케이스**
- 로그인하지 않은 사용자가 주문 상세 정보를 조회하려고 하면 오류를 반환한다.
- 요청된 주문 ID에 해당하는 주문이 존재하지 않으면 오류를 반환한다.
- 주문 상세 정보 조회 중 시스템 오류가 발생하면 오류를 반환한다.
- 사용자가 요청한 주문 ID가 자신의 주문이 아닐 경우 오류를 반환한다.
- 주문 상세 정보 조회 시 결제 이력이나 포인트 내역이 없는 경우에도 오류를 반환하지 않고 빈 값을 반환한다.
- `X-USER-ID` 헤더가 없거나 유효하지 않은 사용자 ID일 경우 오류를 반환한다.

**HTTP 상태코드 / 에러메시지 정의**

| 케이스 | 설명 | HTTP 상태코드 | 에러메시지 예시 |
| --- | --- | --- | --- |
| 사용자 인증 정보 불충분/오류 | 로그인하지 않은 사용자가 주문 상세 조회 시도 | 401 UNAUTHORIZATION | "로그인이 필요합니다." |
| 주문 미존재 | 존재하지 않는 주문 ID 요청 | 404 NOT FOUND | "해당 주문을 찾을 수 없습니다." |
| 주문 상세 정보 오류 | 요청한 주문 ID가 자신의 주문이 아닐 경우 | 403 FORBIDDEN | "해당 주문에 대한 접근 권한이 없습니다." |
| 내부 서버 오류 | 주문 상세 정보 조회 중 시스템 오류 | 500 INTERNAL SERVER ERROR | "주문 상세 정보 조회 중 오류가 발생했습니다." |

---

# 유비쿼터스 용어 정의

| 용어 | 도메인명 | 설명 |
| --- |---------| --- |
| 사용자 | USER | 시스템에 등록된 사용자로, 상품을 조회하고 주문할 수 있는 권한을 가진다. |
| 상품 | PRODUCT | 판매되는 물품으로, 브랜드, 가격, 재고 등의 정보를 포함한다. |
| 브랜드 | BRAND | 상품을 분류하는 기준으로, 브랜드명과 설명을 포함한다. |
| 주문 | ORDER | 사용자가 상품을 구매하기 위해 생성하는 거래로, 주문 ID, 주문 날짜, 결제 금액 등을 포함한다. |
| 주문 상품 | ORDER_ITEM | 주문에 포함된 개별 상품으로, 상품 ID, 수량, 가격 등을 포함한다. |
| 좋아요 | LIKE | 사용자가 상품에 대해 좋아요를 표시하는 기능으로, 사용자 ID와 상품 ID를 포함한다. |
| 포인트 | POINT | 사용자가 상품 구매 시 적립되는 포인트로, 포인트 ID, 사용자 ID, 포인트 금액 등을 포함한다. |
| 포인트 내역 | POINT_HISTORY | 포인트의 적립 및 사용 내역을 기록하는 엔티티로, 포인트 ID, 사용자 ID, 변경 금액, 변경 사유 등을 포함한다. |
| 결제 이력 | PAYMENT_HISTORY | 주문에 대한 결제 정보를 기록하는 엔티티로, 결제 수단, 결제 상태, 결제 금액 등을 포함한다. |


